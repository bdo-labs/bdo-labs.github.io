<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">

    <!-- App friendly -->
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="apple-mobile-web-app-title" content="BDO">

    <!-- About -->
    <title>BDO-labs/api</title>
    <meta name="description" content="REST-API for BDO Strategy">

    <!-- Resources -->
    <link rel="stylesheet" href="/styles.css">
    <script src="/index.js" defer></script>

  </head>
  <body>
    <main>
  <aside>
    <a class="dock" href="#"><i class="ion-ios7-arrow-left"></i></a>
    <h5>Collaborators</h5>
    
      <img class="photo" src="http://www.gravatar.com/avatar/b816a20e685a01bcf8b9e230fe23db09" alt="Henrik Kjelsberg" title="Henrik Kjelsberg" />
    
      <img class="photo" src="http://www.gravatar.com/avatar/2bf535e98362544a379ccc8335fdafdf" alt="Snorre Nævdal" title="Snorre Nævdal" />
    
    <hr>
    <nav>
      <h5><a href="/" rel="index">Repositories</a></h5>
      
        
        <a href="/serve">
          <i class="ion-fork-repo"></i> serve
        </a>
        
      
        
        <a href="/api">
          <i class="ion-fork-repo"></i> api
        </a>
        
      
        
      
    </nav>
  </aside>
  <article>
    <header>
      <h5>v 0.0.1</h5>
      <time>2014-11-11</time>
    </header>
    <section>
      <h1><i class="ion-planet"></i> API</h1>

<p>The API’s conform to a strict REST-structure, so their mostly interchangeable
by just replacing the resource-part, all the subtle differences should be well
documented.</p>
<h2 id="security">Security</h2>
<p>All requests to the API should be over a TLS-connection using basic-auth.
It has the cost of sending your token upon each request, but it makes it
easier to test the API from the command-line etc.</p>
<pre><code class="lang-http">POST /service/AuthorizationService/token
</code></pre>
<p>The authorization service is a stand-alone API, loosely coupled to the rest of the user implementation. Notice that the content-type and payload type for getting a token is “x-www-form-urlencoded” so the payload body will be on form</p>
<pre><code class="lang-javascript">    grant_type=password&amp;username=&quot;test&quot;&amp;password=&quot;testpassword&quot;&amp;client_id=&quot;kEfz/BDu&quot;
</code></pre>
<p>If the username, password, and client id is recognized we received signed token on the response.</p>
<pre><code class="lang-javascript">{
    &quot;access_token&quot;: &quot;1dvcQiXhbfDW8ruqSFqqpZi8ZjiZRnDsZkBebZp4a62sGmrzLonP8a32m6qXnR7st668W0rmPgDoGVVjh8vwQltxG03R7LT0iDLX2drwdXIRIWeKp9q0IdZlyxDoGwcAEI4yr5Ew01U72ASPFp1KB5mcfqUKFWkNP-yO7OMRZgQNEzA7QS_QFrw8jhQqK33VajrEDW5GkWf4vUwt3iPYAY4-JHT-Mab4DiC1erbO3wKhlJua9r6MJrnEHEhHc-kZJuzsm_g_tdeoI1Kj2Qvfb7wXweQ&quot;,
    &quot;token_type&quot;: &quot;bearer&quot;,
    &quot;expires_in&quot;: 86399,
    &quot;refresh_token&quot;: &quot;d595cd1d488045cca74bb2e3e5c63609&quot;,
    &quot;as:client_id&quot;: &quot;kEfz/BDu&quot;,
    &quot;userName&quot;: &quot;test&quot;,
    &quot;.issued&quot;: &quot;Sat, 24 Jan 2015 14:08:14 GMT&quot;,
    &quot;.expires&quot;: &quot;Sun, 25 Jan 2015 14:08:14 GMT&quot;
}
</code></pre>
<p>In order to authenticate API calls the token the bearer token needs to be added in the requests Authorization header.</p>
<pre><code class="lang-javascript">Authorization : Bearer 1dvcQiXhbfDW8ruqSFqqpZi8ZjiZRnDsZkBebZp4a62sGmrzLonP8a32m6qXnR7st668W0rmPgDoGVVjh8vwQltxG03R7LT0iDLX2drwdXIRIWeKp9q0IdZlyxDoGwcAEI4yr5Ew01U72ASPFp1KB5mcfqUKFWkNP-yO7OMRZgQNEzA7QS_QFrw8jhQqK33VajrEDW5GkWf4vUwt3iPYAY4-JHT-Mab4DiC1erbO3wKhlJua9r6MJrnEHEhHc-kZJuzsm_g_tdeoI1Kj2Qvfb7wXweQ
</code></pre>
<p>For testing purposes a secured resource is made available, with restricted access. The username, password, client id and token provided in this section can be used to gain access to the resource.</p>
<pre><code class="lang-http">GET /secured/
</code></pre>
<h2 id="tracing-debugging">Tracing &amp; debugging</h2>
<p>The use of an <code>Accepts-header</code> and returning both an <code>Etag</code> and a unique
<code>Request-Id</code> will make debugging a lot easier, as you can trace it back and
redeem some context to the issue at hand.</p>
<h2 id="status-codes">Status codes</h2>
<p>Using all of the return-codes specified in the HTTP-protocol complicates the
work of creating a robust client. Thus, we only use a small sub-set.</p>
<ul>
<li>200 Success</li>
<li>201 POST succeeded and completed synchronously</li>
<li>202 Accepted, will be processed asynchronously</li>
<li>206 GET succeeded, but only a partial response returned</li>
<li>401 Unauthorized</li>
<li>403 User is not authorized to access the resource</li>
<li>422 Contained invalid parameters</li>
<li>429 Too many requests</li>
<li>500 Internal server error</li>
</ul>
<h2 id="minimize-path-nesting">Minimize path nesting</h2>
<p>Instead of long nested paths, it’s better to identify the resource early. Doing
so avoids the problem of circular-dependencies and can make debugging more
trivial.</p>
<p>Good.</p>
<pre><code>/users/:login/followers
</code></pre><p>Bad.</p>
<pre><code>cards/:slug/indicators/:slug/owner/followers
</code></pre><h2 id="handling-large-responses">Handling large responses</h2>
<p>To paginate results, use <code>Content-Range</code> headers with <code>..</code> as delimiter.
Example:</p>
<pre><code class="lang-http">Content-Range: updated_at 2015-01-01T00:00:00..2015-01-31T23:59:59
Next-Range: updated_at 2015-02-01T00:00:00..2015-02-31T23:59:59
</code></pre>
<h2 id="structured-error-messages">Structured error-messages</h2>
<p>Having a machine-readable <code>id</code>, a human-readable error-<code>message</code> and a resource
where you can find additional information will make the process of creating a
client, much easier.</p>
<pre><code class="lang-http">HTTP/1.1 429 Too Many Requests
</code></pre>
<pre><code class="lang-javascript">{
  &quot;id&quot;: &quot;rate_limit&quot;,
  &quot;message&quot;: &quot;Account reached its API rate limit.&quot;,
  &quot;url&quot;: &quot;https://docs.presti.ge/rate-limits&quot;
}
</code></pre>
<h4 id="retrieve-scorecards">Retrieve scorecards</h4>
<pre><code class="lang-http">GET /scorecard/:{id}
</code></pre>
<pre><code class="lang-javascript">{
        &quot;id&quot;: 1,
        &quot;title&quot;: &quot;Lederkortet&quot;,
        &quot;description&quot;: null,
        &quot;createdtime&quot;: &quot;2014-12-11T18:03:44.95&quot;,
        &quot;updatedtime&quot;: &quot;2014-12-11T18:03:44.95&quot;,
        &quot;status&quot;: &quot;good&quot;,
        &quot;owner&quot;: {
            &quot;id&quot;: 5,
            &quot;name&quot;: &quot;eva&quot;,
            &quot;email&quot;: &quot;snna@bdo.no&quot;
        },
        &quot;categories&quot;: [
            {
                &quot;id&quot;: 1,
                &quot;name&quot;: &quot;Medlemsnytte&quot;,
                &quot;order&quot;: 1,
                &quot;status&quot;: &quot;good&quot;,
                &quot;trend&quot;: &quot;good&quot;,
                &quot;indicators&quot;: [
                    {
                        &quot;id&quot;: 1,
                        &quot;title&quot;: &quot;50 igangsatte boliger pr år&quot;,
                        &quot;description&quot;: null,
                        &quot;order&quot;: 0,
                        &quot;frequency&quot;: &quot;Monthly&quot;,
                        &quot;direction&quot;: &quot;Equal&quot;,
                        &quot;unit&quot;: &quot;%&quot;,
                        &quot;value&quot;: 10,
                        &quot;goal&quot;: 15,
                        &quot;status&quot;: &quot;good&quot;,
                        &quot;trend&quot;: &quot;good&quot;
                    },
                    {
                        &quot;id&quot;: 2,
                        &quot;title&quot;: &quot;Nettovekst boliger til forvaltning&quot;,
                        &quot;description&quot;: null,
                        &quot;order&quot;: 0,
                        &quot;frequency&quot;: &quot;Monthly&quot;,
                        &quot;direction&quot;: &quot;Equal&quot;,
                        &quot;unit&quot;: &quot;&quot;,
                        &quot;value&quot;: 10,
                        &quot;goal&quot;: 15,
                        &quot;status&quot;: &quot;good&quot;,
                        &quot;trend&quot;: &quot;good&quot;
                    }
                ]
            }
        ],
        &quot;events&quot;: [
          {
            &quot;$id&quot;: &quot;218&quot;,
            &quot;id&quot;: 174,
            &quot;createddate&quot;: &quot;2015-01-22T15:49:54.157&quot;,
            &quot;createdby&quot;: {
                &quot;$id&quot;: &quot;219&quot;,
                &quot;id&quot;: 1,
                &quot;name&quot;: &quot;system&quot;,
                &quot;email&quot;: &quot;snna@bdo.no&quot;,
                &quot;imageurl&quot;: null,
                &quot;events&quot;: null
            },
            &quot;type&quot;: 1,
            &quot;title&quot;: &quot;50 igangsatte boliger pr år ble opprettet.&quot;,
                &quot;details&quot;: &quot;laoreet lorem sit sed nonummy dolor diam ipsum elit&quot;
            }
        ]
    },
    {
        &quot;id&quot;: 2,
        &quot;title&quot;: &quot;Styrekortet&quot;,
        &quot;description&quot;: null,
        &quot;createdtime&quot;: &quot;2014-12-11T18:03:44.983&quot;,
        &quot;updatedtime&quot;: &quot;2014-12-11T18:03:44.983&quot;,
        &quot;status&quot;: &quot;good&quot;,
        &quot;owner&quot;: {
            &quot;id&quot;: 5,
            &quot;name&quot;: &quot;eva&quot;,
            &quot;email&quot;: &quot;snna@bdo.no&quot;
        },
        &quot;categories&quot;: [
</code></pre>
<h4 id="retrieve-an-indicator-object">Retrieve an indicator object</h4>
<pre><code class="lang-http">GET /indicator/id
</code></pre>
<pre><code class="lang-javascript">{
  &quot;id&quot;: 4,
  &quot;title&quot;: &quot;Oppslag i media&quot;,
  &quot;description&quot;: null,
  &quot;order&quot;: 0,
  &quot;frequency&quot;: &quot;Monthly&quot;,
  &quot;direction&quot;: &quot;Equal&quot;,
  &quot;unit&quot;: &quot;&quot;,
  &quot;value&quot;: 631889,
  &quot;goal&quot;: 990694,
  &quot;status&quot;: &quot;bad&quot;,
  &quot;trend&quot;: &quot;down&quot;
  &quot;values&quot;: 
  [
    {
        &quot;$id&quot;: &quot;2&quot;,
        &quot;date&quot;: &quot;2014-01-01T00:00:00&quot;,
        &quot;value&quot;: 1371
    },
    {
        &quot;$id&quot;: &quot;3&quot;,
        &quot;date&quot;: &quot;2014-02-01T00:00:00&quot;,
        &quot;value&quot;: 4959
    },
    {
        &quot;$id&quot;: &quot;4&quot;,
        &quot;date&quot;: &quot;2014-03-01T00:00:00&quot;,
        &quot;value&quot;: 4959
    }
  ],
  &quot;targets&quot;: 
  [
    {
        &quot;$id&quot;: &quot;110&quot;,
        &quot;date&quot;: &quot;2014-01-01T00:00:00&quot;,
        &quot;value&quot;: 645
    },
    {
        &quot;$id&quot;: &quot;111&quot;,
        &quot;date&quot;: &quot;2014-02-01T00:00:00&quot;,
        &quot;value&quot;: 4950
    },
    {
        &quot;$id&quot;: &quot;112&quot;,
        &quot;date&quot;: &quot;2014-03-01T00:00:00&quot;,
        &quot;value&quot;: 4950
    },
    {
        &quot;$id&quot;: &quot;113&quot;,
        &quot;date&quot;: &quot;2014-04-01T00:00:00&quot;,
        &quot;value&quot;: 9256
    }
  ],
  &quot;events&quot;: 
  [
    {
      &quot;$id&quot;: &quot;218&quot;,
      &quot;id&quot;: 174,
      &quot;createddate&quot;: &quot;2015-01-22T15:49:54.157&quot;,
      &quot;createdby&quot;: {
          &quot;$id&quot;: &quot;219&quot;,
          &quot;id&quot;: 1,
          &quot;name&quot;: &quot;system&quot;,
          &quot;email&quot;: &quot;snna@bdo.no&quot;,
          &quot;imageurl&quot;: null,
          &quot;events&quot;: null
      },
      &quot;type&quot;: 1,
      &quot;title&quot;: &quot;50 igangsatte boliger pr år ble opprettet.&quot;,
          &quot;details&quot;: &quot;laoreet lorem sit sed nonummy dolor diam ipsum elit&quot;
      }
  ]
}
</code></pre>
<h4 id="retrieve-a-list-of-tasks">Retrieve a list of tasks</h4>
<pre><code class="lang-http">GET /task/:{id}
</code></pre>
<pre><code class="lang-javascript">[
    {
        &quot;$id&quot;: &quot;1&quot;,
        &quot;id&quot;: 17,
        &quot;title&quot;: &quot;ut ut consectetuer dolor ipsum magna. elit diam ipsum elit dolore nibh. &quot;,
        &quot;description&quot;: &quot;ut ut consectetuer dolor ipsum magna&quot;,
        &quot;deadline&quot;: &quot;2014-12-11T22:12:19.847&quot;,
        &quot;status&quot;: &quot;Ikke påbegynt&quot;,
        &quot;priority&quot;: &quot;Lav&quot;,
        &quot;tagstring&quot;: &quot;50 igangsatte boliger pr år&quot;,
        &quot;createdtime&quot;: &quot;2014-12-11T22:12:19.927&quot;,
        &quot;updatedtime&quot;: &quot;2014-12-11T22:12:19.927&quot;,
        &quot;createdby&quot;: null,
        &quot;updatedby&quot;: null,
        &quot;events&quot;: 
        [
          {
            &quot;$id&quot;: &quot;218&quot;,
            &quot;id&quot;: 174,
            &quot;createddate&quot;: &quot;2015-01-22T15:49:54.157&quot;,
            &quot;createdby&quot;: {
                &quot;$id&quot;: &quot;219&quot;,
                &quot;id&quot;: 1,
                &quot;name&quot;: &quot;system&quot;,
                &quot;email&quot;: &quot;snna@bdo.no&quot;,
                &quot;imageurl&quot;: null,
                &quot;events&quot;: null
            },
            &quot;type&quot;: 1,
            &quot;title&quot;: &quot;50 igangsatte boliger pr år ble opprettet.&quot;,
                &quot;details&quot;: &quot;laoreet lorem sit sed nonummy dolor diam ipsum elit&quot;
            }
        ]
    },
    {
        &quot;$id&quot;: &quot;2&quot;,
        &quot;id&quot;: 18,
        &quot;title&quot;: &quot;dolore adipiscing euismod laoreet sed elit. laoreet euismod adipiscing ut aliquam dolor. &quot;,
        &quot;description&quot;: &quot;dolore adipiscing euismod laoreet sed elit laoreet euismod adipiscing ut aliquam dolor magna erat aliquam dolor euismod consectetuer elit euismod dolor aliquam ut adipiscing sit diam diam. amet magna nibh magna amet elit diam euismod euismod elit magna&quot;,
        &quot;deadline&quot;: &quot;2014-12-11T22:12:19.847&quot;,
        &quot;status&quot;: &quot;Påbegynt i rute&quot;,
        &quot;priority&quot;: &quot;Lav&quot;,
        &quot;tagstring&quot;: &quot;50 igangsatte boliger pr år&quot;,
        &quot;createdtime&quot;: &quot;2014-12-11T22:12:20.087&quot;,
        &quot;updatedtime&quot;: &quot;2014-12-11T22:12:20.087&quot;,
        &quot;createdby&quot;: 
          {
            &quot;$id&quot;: &quot;219&quot;,
            &quot;id&quot;: 1,
            &quot;name&quot;: &quot;system&quot;,
            &quot;email&quot;: &quot;snna@bdo.no&quot;,
            &quot;imageurl&quot;: null,
            &quot;events&quot;: null
          },
        &quot;updatedby&quot;: null,
        &quot;events&quot;: 
        [
          {
            &quot;$id&quot;: &quot;218&quot;,
            &quot;id&quot;: 174,
            &quot;createddate&quot;: &quot;2015-01-22T15:49:54.157&quot;,
            &quot;createdby&quot;: {
                &quot;$id&quot;: &quot;219&quot;,
                &quot;id&quot;: 1,
                &quot;name&quot;: &quot;system&quot;,
                &quot;email&quot;: &quot;snna@bdo.no&quot;,
                &quot;imageurl&quot;: null,
                &quot;events&quot;: null
            },
            &quot;type&quot;: 1,
            &quot;title&quot;: &quot;50 igangsatte boliger pr år ble opprettet.&quot;,
                &quot;details&quot;: &quot;laoreet lorem sit sed nonummy dolor diam ipsum elit&quot;
            }
        ]
    },
</code></pre>
<h4 id="retrieve-a-list-of-all-users-">Retrieve a list of all users.</h4>
<pre><code class="lang-http">GET /users
</code></pre>
<pre><code class="lang-javascript">[
  {
    &quot;id&quot;: &quot;8764ab4a9b4...&quot;,
    &quot;name&quot;: &quot;Henrik Kjelsberg&quot;,
    &quot;foo&quot;: &quot;bar&quot;
  }
]
</code></pre>
<h4 id="retrieve-a-single-user-object-">Retrieve a single user-object.</h4>
<pre><code class="lang-http">GET /users/:{login,id}
</code></pre>
<pre><code class="lang-javascript">{
  &quot;id&quot;: &quot;8764ab4a9b4...&quot;,
  &quot;type&quot;: &quot;User&quot;,
  &quot;login&quot;: &quot;hkjels&quot;,
  &quot;created_at&quot;: &quot;2014-10-10T12:00:00Z&quot;,
  &quot;updated_at&quot;: &quot;2015-01-01T12:00:00Z&quot;,
  &quot;name&quot;: &quot;Henrik Kjelsberg&quot;,
  &quot;email&quot;: &quot;henrik.kjelsberg@bdo.no&quot;,
  &quot;role&quot;: &quot;admin&quot;,
  &quot;organization&quot;: &quot;bdo&quot;,
  &quot;following&quot;: [
    {
      &quot;id&quot;: &quot;0786ba078b6a...&quot;
    }
  ]
  &quot;followers&quot;: [
    {
      &quot;id&quot;: &quot;0786ba078b6a...&quot;
    }
  ]
}
</code></pre>
<h4 id="retrieve-your-own-user-object">Retrieve your own user-object</h4>
<pre><code class="lang-http">GET /user
</code></pre>
<h4 id="retrieve-a-list-of-all-organizations-">Retrieve a list of all organizations.</h4>
<pre><code class="lang-http">GET /orgs
</code></pre>
<pre><code class="lang-javascript">[
  {
    &quot;id&quot;: &quot;5234646265b46354b...&quot;,
    &quot;name&quot;: &quot;BDO AS&quot;,
    &quot;foo&quot;: &quot;bar&quot;
  }
]
</code></pre>
<h4 id="retrieve-a-single-organization-object-">Retrieve a single organization-object.</h4>
<pre><code class="lang-http">GET /orgs/:{slug,id}
</code></pre>
<pre><code class="lang-javascript">{
  &quot;id&quot;: &quot;5234646265b46354b...&quot;,
  &quot;name&quot;: &quot;BDO AS&quot;,
  &quot;type&quot;: &quot;Organization&quot;
}
</code></pre>
<h4 id="retrieve-your-own-organization">Retrieve your own organization</h4>
<pre><code class="lang-http">GET /org
</code></pre>
<h4 id="list-public-events">List public events</h4>
<pre><code class="lang-http">GET /events
</code></pre>
<h4 id="list-organization-events">List organization events</h4>
<pre><code class="lang-http">GET /org/:slug/events
</code></pre>
<h4 id="list-user-events">List user events</h4>
<pre><code class="lang-http">GET /users/:login/events
</code></pre>

    </section>
  </article>
</main>

  </body>
</html>
