<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">

    <!-- App friendly -->
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="apple-mobile-web-app-title" content="BDO">

    <!-- About -->
    <title>BDO-labs/api</title>
    <meta name="description" content="REST-API for BDO Strategy">

    <!-- Resources -->
    <link rel="stylesheet" href="/styles.css">
    <script src="/index.js" defer></script>

  </head>
  <body>
    <main>
  <aside>
    <a class="dock" href="#"><i class="ion-ios7-arrow-left"></i></a>
    <h5>Collaborators</h5>
    
      <img class="photo" src="http://www.gravatar.com/avatar/b816a20e685a01bcf8b9e230fe23db09" alt="Henrik Kjelsberg" title="Henrik Kjelsberg" />
    
      <img class="photo" src="http://www.gravatar.com/avatar/2bf535e98362544a379ccc8335fdafdf" alt="Snorre Nævdal" title="Snorre Nævdal" />
    
    <hr>
    <nav>
      <h5><a href="/" rel="index">Repositories</a></h5>
      
        
        <a href="/api">
          <i class="ion-fork-repo"></i> api
        </a>
        
      
        
        <a href="/serve">
          <i class="ion-fork-repo"></i> serve
        </a>
        
      
        
      
    </nav>
  </aside>
  <article>
    <header>
      <h5>v 0.0.1</h5>
      <time>2014-11-11</time>
    </header>
    <section>
      <h1><i class="ion-planet"></i> API</h1>

<p>The API’s conform to a strict REST-structure, so their mostly interchangeable
by just replacing the resource-part, all the subtle differences should be well
documented.</p>
<h2 id="security">Security</h2>
<p>All requests to the API should be over a TLS-connection using basic-auth.
It has the cost of sending your token upon each request, but it makes it
easier to test the API from the command-line etc.</p>
<h2 id="tracing-debugging">Tracing &amp; debugging</h2>
<p>The use of an <code>Accepts-header</code> and returning both an <code>Etag</code> and a unique
<code>Request-Id</code> will make debugging a lot easier, as you can trace it back and
redeem some context to the issue at hand.</p>
<h2 id="status-codes">Status codes</h2>
<p>Using all of the return-codes specified in the HTTP-protocol complicates the
work of creating a robust client. Thus, we only use a small sub-set.</p>
<ul>
<li>200 Success</li>
<li>201 POST succeeded and completed synchronously</li>
<li>202 Accepted, will be processed asynchronously</li>
<li>206 GET succeeded, but only a partial response returned</li>
<li>401 Unauthorized</li>
<li>403 User is not authorized to access the resource</li>
<li>422 Contained invalid parameters</li>
<li>429 Too many requests</li>
<li>500 Internal server error</li>
</ul>
<h2 id="minimize-path-nesting">Minimize path nesting</h2>
<p>Instead of long nested paths, it’s better to identify the resource early. Doing
so avoids the problem of circular-dependencies and can make debugging more
trivial.</p>
<p>Good.</p>
<pre><code>/users/:login/followers
</code></pre><p>Bad.</p>
<pre><code>cards/:slug/indicators/:slug/owner/followers
</code></pre><h2 id="handling-large-responses">Handling large responses</h2>
<p>To paginate results, use <code>Content-Range</code> headers with <code>..</code> as delimiter.
Example:</p>
<pre><code class="lang-http">Content-Range: updated_at 2015-01-01T00:00:00..2015-01-31T23:59:59
Next-Range: updated_at 2015-02-01T00:00:00..2015-02-31T23:59:59
</code></pre>
<h2 id="structured-error-messages">Structured error-messages</h2>
<p>Having a machine-readable <code>id</code>, a human-readable error-<code>message</code> and a resource
where you can find additional information will make the process of creating a
client, much easier.</p>
<pre><code class="lang-http">HTTP/1.1 429 Too Many Requests
</code></pre>
<pre><code class="lang-javascript">{
  &quot;id&quot;: &quot;rate_limit&quot;,
  &quot;message&quot;: &quot;Account reached its API rate limit.&quot;,
  &quot;url&quot;: &quot;https://docs.presti.ge/rate-limits&quot;
}
</code></pre>
<h4 id="retrieve-cards">Retrieve cards</h4>
<p>Note that <code>/cards</code> is a short-hand for <code>/org/cards</code>.</p>
<pre><code class="lang-http">GET /cards
</code></pre>
<pre><code class="lang-javascript">{
        &quot;id&quot;: 1,
        &quot;title&quot;: &quot;Lederkortet&quot;,
        &quot;description&quot;: null,
        &quot;createdtime&quot;: &quot;2014-12-11T18:03:44.95&quot;,
        &quot;updatedtime&quot;: &quot;2014-12-11T18:03:44.95&quot;,
        &quot;status&quot;: &quot;good&quot;,
        &quot;owner&quot;: {
            &quot;id&quot;: 5,
            &quot;name&quot;: &quot;eva&quot;,
            &quot;email&quot;: &quot;snna@bdo.no&quot;
        },
        &quot;categories&quot;: [
            {
                &quot;id&quot;: 1,
                &quot;name&quot;: &quot;Medlemsnytte&quot;,
                &quot;order&quot;: 1,
                &quot;status&quot;: &quot;good&quot;,
                &quot;trend&quot;: &quot;good&quot;,
                &quot;indicators&quot;: [
                    {
                        &quot;id&quot;: 1,
                        &quot;title&quot;: &quot;50 igangsatte boliger pr år&quot;,
                        &quot;description&quot;: null,
                        &quot;order&quot;: 0,
                        &quot;frequency&quot;: &quot;Monthly&quot;,
                        &quot;direction&quot;: &quot;Equal&quot;,
                        &quot;unit&quot;: &quot;%&quot;,
                        &quot;value&quot;: 10,
                        &quot;goal&quot;: 15,
                        &quot;status&quot;: &quot;good&quot;,
                        &quot;trend&quot;: &quot;good&quot;
                    },
                    {
                        &quot;id&quot;: 2,
                        &quot;title&quot;: &quot;Nettovekst boliger til forvaltning&quot;,
                        &quot;description&quot;: null,
                        &quot;order&quot;: 0,
                        &quot;frequency&quot;: &quot;Monthly&quot;,
                        &quot;direction&quot;: &quot;Equal&quot;,
                        &quot;unit&quot;: &quot;&quot;,
                        &quot;value&quot;: 10,
                        &quot;goal&quot;: 15,
                        &quot;status&quot;: &quot;good&quot;,
                        &quot;trend&quot;: &quot;good&quot;
                    }
                ]
            }
        ]
    },
    {
        &quot;id&quot;: 2,
        &quot;title&quot;: &quot;Styrekortet&quot;,
        &quot;description&quot;: null,
        &quot;createdtime&quot;: &quot;2014-12-11T18:03:44.983&quot;,
        &quot;updatedtime&quot;: &quot;2014-12-11T18:03:44.983&quot;,
        &quot;status&quot;: &quot;good&quot;,
        &quot;owner&quot;: {
            &quot;id&quot;: 5,
            &quot;name&quot;: &quot;eva&quot;,
            &quot;email&quot;: &quot;snna@bdo.no&quot;
        },
        &quot;categories&quot;: [
</code></pre>
<h4 id="retrieve-an-indicator-object">Retrieve an indicator object</h4>
<pre><code class="lang-http">GET /indicator/:{slug,id}?expand=owner
</code></pre>
<pre><code class="lang-javascript">{
  &quot;id&quot;: &quot;72542b234523b...&quot;
  &quot;category&quot;: &quot;økonomi&quot;,
  &quot;title&quot;: &quot;omsetning&quot;,
  &quot;direction&quot;: -1,
  &quot;status&quot;: &quot;warning&quot;,
  &quot;description&quot;: &quot;her kan det skrives tekst etter behov&quot;,
  &quot;order&quot;: 1,
  &quot;indicators&quot;: [
    {
      &quot;id&quot;: &quot;2345a23b5ab...&quot;,
      &quot;frequency&quot;: &quot;monthly&quot;,
      &quot;status&quot;: &quot;good&quot;,
      &quot;direction&quot;: 1,
      &quot;unit&quot;: &quot;nok&quot;,
      &quot;tags&quot;: [&quot;foretaksservice&quot;],
      &quot;create_at&quot;: &quot;2015-01-01T12:00:00Z&quot;,
      &quot;updated_at&quot;: &quot;2015-01-01T12:00:00Z&quot;,
      &quot;owner&quot;: {
        &quot;id&quot;: &quot;32bdd2b3...&quot;,
        &quot;groups&quot;: [&quot;digitale tjenester&quot;,&quot;fest komité&quot;],
        &quot;name&quot;: &quot;Snorre Nævdal&quot;,
        &quot;email&quot;: &quot;snorre.naevdal@bdo.no&quot;,
        &quot;created_at&quot;: &quot;2014-05-05T12:00:00Z&quot;,
        &quot;updated_at&quot;: &quot;2014-05-05T12:00:00Z&quot;
      },
      &quot;payload&quot;: {
        &quot;id&quot;: &quot;24643ba52b...&quot;
      }
    }
  ]
}
</code></pre>
<h4 id="retrieve-a-list-of-tasks">Retrieve a list of tasks</h4>
<pre><code class="lang-http">GET /task/:{slug,id}?expand=owner,assignee
</code></pre>
<h4 id="retrieve-a-list-of-all-users-">Retrieve a list of all users.</h4>
<pre><code class="lang-http">GET /users
</code></pre>
<pre><code class="lang-javascript">[
  {
    &quot;id&quot;: &quot;8764ab4a9b4...&quot;,
    &quot;name&quot;: &quot;Henrik Kjelsberg&quot;,
    &quot;foo&quot;: &quot;bar&quot;
  }
]
</code></pre>
<h4 id="retrieve-a-single-user-object-">Retrieve a single user-object.</h4>
<pre><code class="lang-http">GET /users/:{login,id}
</code></pre>
<pre><code class="lang-javascript">{
  &quot;id&quot;: &quot;8764ab4a9b4...&quot;,
  &quot;type&quot;: &quot;User&quot;,
  &quot;login&quot;: &quot;hkjels&quot;,
  &quot;created_at&quot;: &quot;2014-10-10T12:00:00Z&quot;,
  &quot;updated_at&quot;: &quot;2015-01-01T12:00:00Z&quot;,
  &quot;name&quot;: &quot;Henrik Kjelsberg&quot;,
  &quot;email&quot;: &quot;henrik.kjelsberg@bdo.no&quot;,
  &quot;role&quot;: &quot;admin&quot;,
  &quot;organization&quot;: &quot;bdo&quot;,
  &quot;following&quot;: [
    {
      &quot;id&quot;: &quot;0786ba078b6a...&quot;
    }
  ]
  &quot;followers&quot;: [
    {
      &quot;id&quot;: &quot;0786ba078b6a...&quot;
    }
  ]
}
</code></pre>
<h4 id="retrieve-your-own-user-object">Retrieve your own user-object</h4>
<pre><code class="lang-http">GET /user
</code></pre>
<h4 id="retrieve-a-list-of-all-organizations-">Retrieve a list of all organizations.</h4>
<pre><code class="lang-http">GET /orgs
</code></pre>
<pre><code class="lang-javascript">[
  {
    &quot;id&quot;: &quot;5234646265b46354b...&quot;,
    &quot;name&quot;: &quot;BDO AS&quot;,
    &quot;foo&quot;: &quot;bar&quot;
  }
]
</code></pre>
<h4 id="retrieve-a-single-organization-object-">Retrieve a single organization-object.</h4>
<pre><code class="lang-http">GET /orgs/:{slug,id}
</code></pre>
<pre><code class="lang-javascript">{
  &quot;id&quot;: &quot;5234646265b46354b...&quot;,
  &quot;name&quot;: &quot;BDO AS&quot;,
  &quot;type&quot;: &quot;Organization&quot;
}
</code></pre>
<h4 id="retrieve-your-own-organization">Retrieve your own organization</h4>
<pre><code class="lang-http">GET /org
</code></pre>
<h4 id="list-public-events">List public events</h4>
<pre><code class="lang-http">GET /events
</code></pre>
<h4 id="list-organization-events">List organization events</h4>
<pre><code class="lang-http">GET /org/:slug/events
</code></pre>
<h4 id="list-user-events">List user events</h4>
<pre><code class="lang-http">GET /users/:login/events
</code></pre>

    </section>
  </article>
</main>

  </body>
</html>
